<div class="md:p-4">
  <p-card [class.mobile-card]="isMobile" styleClass="max-w-3xl">
    <ng-template pTemplate="title">
      <h2 class="m-0 mb-5">
        {{ isEditMode ? "Uitgave Bewerken" : "Nieuwe Uitgave" }}
      </h2>
    </ng-template>

    <form
      [formGroup]="form"
      class="p-fluid form-content-wrapper"
      (ngSubmit)="submit()"
    >
      <div class="field">
        <p-floatlabel variant="on">
          <input
            pInputText
            id="description"
            formControlName="description"
            class="w-full"
            autocomplete="off"
            aria-required="true"
          />
          <label for="description">Omschrijving *</label>
        </p-floatlabel>
        <app-validation-message
          [control]="form.controls.description"
          label="Omschrijving"
        />
      </div>

      <div class="formgrid grid">
        <div class="field col-12 md:col-6">
          <p-floatlabel variant="on">
            <p-inputNumber
              id="amount"
              formControlName="amount"
              mode="currency"
              currency="EUR"
              styleClass="w-full"
              aria-required="true"
            ></p-inputNumber>
            <label for="amount">Bedrag *</label>
          </p-floatlabel>
          <app-validation-message
            [control]="form.controls.amount"
            label="Bedrag"
          />
        </div>

        <div class="field col-12 md:col-6">
          <p-floatlabel variant="on">
            <p-datepicker
              id="date"
              formControlName="date"
              dateFormat="dd-mm-yy"
              [showIcon]="true"
              styleClass="w-full"
              aria-required="true"
            ></p-datepicker>
            <label for="date">Datum *</label>
          </p-floatlabel>
          <app-validation-message
            [control]="form.controls.date"
            label="Datum"
          />
        </div>
      </div>

      <div class="field">
        <p-floatlabel variant="on">
          <p-select
            id="type"
            formControlName="type"
            [options]="expenseTypes"
            optionLabel="label"
            optionValue="value"
            styleClass="w-full"
            aria-required="true"
          ></p-select>
          <label for="type">Type *</label>
        </p-floatlabel>
        <app-validation-message [control]="form.controls.type" label="Type" />
      </div>

      <div class="field">
        <p-floatlabel variant="on">
          <textarea
            pInputTextarea
            id="notes"
            formControlName="notes"
            rows="3"
            class="w-full"
          ></textarea>
          <label for="notes">Notities (optioneel)</label>
        </p-floatlabel>
      </div>

      <!-- Hidden submit button for form submission -->
      <button type="submit" class="hidden"></button>
    </form>
    <ng-template pTemplate="footer">
      <div class="flex justify-content-end gap-2 sticky-footer-actions">
        <p-button
          label="Opslaan"
          icon="pi pi-check"
          (click)="submit()"
          [loading]="isSaving"
          type="button"
        ></p-button>
        <p-button
          label="Annuleren"
          icon="pi pi-times"
          styleClass="p-button-text"
          (click)="cancel()"
          type="button"
        ></p-button>
      </div>
    </ng-template>
  </p-card>
</div>
