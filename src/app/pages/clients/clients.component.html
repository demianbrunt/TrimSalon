<p-dataView
  #dv
  [value]="clients"
  [paginator]="true"
  [rows]="9"
  [sortField]="sortField"
  [sortOrder]="sortOrder"
  [filterBy]="'name,dogs.name,dogs.breed.name'"
>
  <ng-template #header>
    <app-table-header
      placeholder="Zoek klant of hond"
      [table]="dv"
      (addClick)="showClientForm()"
    ></app-table-header>
  </ng-template>
  <ng-template #list let-items>
    @for (client of items; track client.id) {
      <div class="col-12 md:col-6 lg:col-4 p-2">
        <div
          class="p-4 border-1 surface-border surface-card border-round h-full flex flex-column"
        >
          <div class="flex-grow-1">
            <div class="font-bold text-lg">{{ client.name }}</div>
            <div class="text-secondary">{{ client.phone }}</div>
            <div class="mt-2">
              @for (dog of client.dogs; track dog.name) {
                <p-tag
                  [value]="
                    dog.name + ' (' + (dog.breed?.name || 'Onbekend ras') + ')'
                  "
                  styleClass="mr-2 mb-2"
                ></p-tag>
              }
            </div>
          </div>
          <div class="flex-shrink-0 mt-3">
            <div class="flex justify-content-end gap-2">
              <p-button
                icon="pi pi-pencil"
                styleClass="p-button-text p-button-rounded"
                (click)="showClientForm(client)"
                pTooltip="Bewerken"
              ></p-button>
              <p-button
                icon="pi pi-trash"
                styleClass="p-button-text p-button-rounded p-button-danger"
                (click)="deleteClient(client)"
                pTooltip="Anonimiseren"
              ></p-button>
            </div>
          </div>
        </div>
      </div>
    } @empty {
      <div class="text-center p-4">Geen klanten gevonden.</div>
    }
  </ng-template>
</p-dataView>
