<div class="p-4">
  <p-toast></p-toast>
  <div class="card">
    <div class="flex justify-content-between align-items-center mb-4">
      <h2 class="m-0">{{ isEditMode ? "Klant Bewerken" : "Nieuwe Klant" }}</h2>
    </div>
    <form class="formgrid grid">
      <div class="field col-12 mt-1">
        <p-floatlabel variant="on">
          <input
            pInputText
            id="naam"
            class="w-full"
            [formControl]="form.controls.name"
            autocomplete="off"
          />
          <label for="naam">Naam</label>
        </p-floatlabel>
      </div>
      <div class="field col-12">
        <p-floatlabel variant="on">
          <input
            pInputText
            id="email"
            class="w-full"
            [formControl]="form.controls.email"
            autocomplete="off"
          />
          <label for="email">E-mail</label>
        </p-floatlabel>
      </div>
      <div class="field col-12">
        <p-floatlabel variant="on">
          <input
            pInputText
            id="telefoon"
            class="w-full"
            placeholder="+31 6 12345678"
            [formControl]="form.controls.phone"
            autocomplete="off"
          />
          <label for="telefoon">Telefoon</label>
        </p-floatlabel>
      </div>
      <p-divider />
      <div class="flex justify-content-between align-items-center mb-2 w-full">
        <h4 class="m-0">Honden</h4>
        <p-button
          styleClass=""
          size="small"
          icon="pi pi-plus"
          label="Toevoegen"
          (click)="addDog()"
          type="button"
        ></p-button>
      </div>
      @for (dogGroup of dogsArray.controls; track $index) {
        <div
          [formGroup]="$any(dogGroup)"
          class="formgrid grid grid-nogutter border-1 surface-border p-3 border-round mb-2 align-items-end w-full"
        >
          <div class="field col-12">
            <p-floatlabel variant="on">
              <input
                pInputText
                id="naamHond"
                class="w-full"
                [formControl]="dogGroup.controls.name"
                autocomplete="off"
              />
              <label for="email">Naam</label>
            </p-floatlabel>
          </div>
          <div class="field col-12">
            <p-floatlabel class="w-full md:w-56" variant="on">
              <p-select
                [formControl]="dogGroup.controls.breed"
                inputId="ras"
                [options]="allBreeds"
                optionLabel="name"
                class="w-full"
              />
              <label for="ras">Ras</label>
            </p-floatlabel>
          </div>
          @if (canDeleteDog) {
            <div class="field col">
              <p-button
                icon="pi pi-trash"
                styleClass="p-button-danger w-full"
                (click)="removeDog($index)"
                type="button"
              ></p-button>
            </div>
          }
        </div>
      }
    </form>
    <div class="flex justify-content-end mt-4 gap-2">
      <p-button
        label="Annuleren"
        icon="pi pi-times"
        styleClass="p-button-text"
        (click)="cancel()"
        type="button"
      ></p-button>
      <p-button
        label="Opslaan"
        icon="pi pi-check"
        (click)="saveClient()"
        [disabled]="form?.invalid || isSaving"
      ></p-button>
    </div>
  </div>
</div>
